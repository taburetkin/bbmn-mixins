{"version":3,"file":"index.js","sources":["collection-view/empty-fetch/index.js","collection-view/improved-indexes/index.js","collection-view/next-collection-view/index.js","../node_modules/bbmn-core/lib/es/index.js","../node_modules/bbmn-utils/src/is-known-ctor/ctors.js","../node_modules/bbmn-utils/src/is-known-ctor/index.js","../node_modules/bbmn-utils/src/better-result/index.js","../node_modules/bbmn-utils/src/camel-case/index.js","../node_modules/bbmn-utils/src/get-by-path/get-property.js","../node_modules/bbmn-utils/src/get-by-path/get-by-path-array.js","../node_modules/bbmn-utils/src/get-by-path/index.js","../node_modules/bbmn-utils/src/get-option/index.js","../node_modules/bbmn-utils/src/build-view-by-key/index.js","collection-view/customs/index.js","common/get-option/index.js","common/is-fetching/index.js","common/childrenable/index.js","model/smart-get/get-nested-result.js","model/smart-get/get-property-schema.js","model/smart-get/get-display-config.js","model/smart-get/index.js","view/build-view-by-key/index.js","view/css-class-modifiers/index.js","view/destroy-view/index.js","view/nested-views/build-region.js","view/nested-views/normalize-region.js","view/nested-views/index.js"],"sourcesContent":["export default CollectionView => CollectionView.extend({\r\n\tshouldHandleEmptyFetch: true, \r\n\tconstructor(){\r\n\t\tCollectionView.apply(this, arguments);\r\n\r\n\t\tthis.getOption('shouldHandleEmptyFetch') && this.emptyView\r\n\t\t\t&& this._handleEmptyFetch();\r\n\t},\r\n\t_handleEmptyFetch(){\r\n\t\tif (!this.collection || this.collection.length) { return; }\r\n\r\n\t\tthis.listenToOnce(this.collection, 'sync', \r\n\t\t\t() => !this.collection.length && this._renderChildren()\r\n\t\t);\r\n\r\n\t},\r\n});\r\n","function rebuildIndexes() {\r\n\tif (!this.getOption('shouldRebuildIndexes') || !this.collection) {\r\n\t\treturn;\r\n\t}\r\n\tlet models = this.collection.models;\r\n\tfor (let index = 0, length = models.length; index < length; index++) {\r\n\t\tlet model = models[index];\r\n\t\tlet view = this._children.findByModel(model);\r\n\t\tview && (view._index = index);\r\n\t}\r\n}\r\n\r\nexport default CollectionView => CollectionView.extend({\r\n\tshouldRebuildIndexes: true,\r\n\r\n\tconstructor() {\t\t\r\n\t\t\r\n\t\tCollectionView.apply(this, arguments);\r\n\t\tthis.on('before:sort', rebuildIndexes.bind(this));\r\n\t},\r\n\t_addChild(view, index){\r\n\t\tview._isModelView = arguments.length === 1;\r\n\t\tif (index != null) {\r\n\t\t\tview._index = index;\r\n\t\t}\r\n\t\treturn CollectionView.prototype._addChild.apply(this, arguments);\r\n\t},\r\n\t_viewComparator(v1,v2){\r\n\t\tlet res = v1._index - v2._index;\r\n\t\tif (res) return res;\r\n\t\tif (v1._isModelView) return 1;\r\n\t\treturn -1;\r\n\t},\r\n});\r\n","export default CollectionView => CollectionView.extend({\r\n\t_renderChildren() {\r\n\t\t// If there are unrendered views prevent add to end perf\r\n\t\tif (this._hasUnrenderedViews) {\r\n\t\t\tdelete this._addedViews;\r\n\t\t\tdelete this._hasUnrenderedViews;\r\n\t\t}\r\n\r\n\t\tconst views = this._addedViews || this.children._views;\r\n\r\n\t\tthis.triggerMethod('before:render:children', this, views);\r\n\t\r\n\t\tthis._showEmptyView();\r\n\t\r\n\t\tconst els = this._getBuffer(views);\r\n\t\r\n\t\tthis._attachChildren(els, views);\r\n\t\r\n\t\tdelete this._addedViews;\r\n\t\r\n\t\tthis.triggerMethod('render:children', this, views);\r\n\t},\r\n\taddChildView(view, index, options = {}) {\r\n\t\tif (!view || view._isDestroyed) {\r\n\t\t\treturn view;\r\n\t\t}\r\n\r\n\t\tif (_.isObject(index)) {\r\n\t\t\toptions = index;\r\n\t\t}\r\n\r\n\t\t// If options has defined index we should use it\r\n\t\tif (options.index != null) {\r\n\t\t\tindex = options.index;\r\n\t\t}\r\n\r\n\t\tif (!this._isRendered && !options.preventRender) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tthis._addChild(view, index);\r\n\r\n\t\tif (options.preventRender) {\r\n\t\t\tthis._hasUnrenderedViews = true;\r\n\t\t\treturn view;\r\n\t\t}\r\n\r\n\t\tconst hasIndex = (typeof index !== 'undefined');\r\n\t\tconst isAddedToEnd = !hasIndex || index >= this._children.length;\r\n\r\n\t\t// Only cache views if added to the end and there is no unrendered views\r\n\t\tif (isAddedToEnd && !this._hasUnrenderedViews) {\r\n\t\t\tthis._addedViews = [view];\r\n\t\t}\r\n\t\t\r\n\t\tif (hasIndex) {\r\n\t\t\tthis._renderChildren();\r\n\t\t} else {\r\n\t\t\tthis.sort();\r\n\t\t}\r\n\t\r\n\t\treturn view;\r\n\t},\r\n\t_showEmptyView() {\r\n\r\n\t\tthis._destroyEmptyView();\r\n\t\r\n\t\tif(!this.isEmpty()) { return; }\r\n\r\n\t\tconst EmptyView = this._getEmptyView();\t\r\n\t\tif (!EmptyView) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\r\n\t\tconst options = this._getEmptyViewOptions();\r\n\t\tthis._emptyViewInstance = new EmptyView(options);\r\n\t\r\n\t\tthis.addChildView(this._emptyViewInstance, { preventRender: true, index: 0, });\r\n\t\r\n\t},\r\n\t_destroyEmptyView(){\r\n\t\tlet view = this._emptyViewInstance;\r\n\t\tif (!view) return;\r\n\t\r\n\t\tthis._removeChildView(view);\r\n\t\r\n\t\tthis._removeChild(view);\r\n\t\r\n\t\tview.destroy();\r\n\t\tdelete this._emptyViewInstance;\r\n\t},\r\n}, { CollectionViewMixin_4x: true});\r\n","import Mn, { Region } from 'backbone.marionette';\nimport { Collection, Events, Model, Router, View as View$1, ajax, history } from 'backbone';\n\nvar MnObject = Mn.Object || Mn.MnObject;\n\nfunction isClass(arg, Base) {\n\treturn _.isFunction(arg) && (arg == Base || arg.prototype instanceof Base);\n}\n\nfunction isModel(arg) {\n\treturn arg instanceof Model;\n}\n\nfunction isModelClass(arg) {\n\treturn isClass(arg, Model);\n}\n\nfunction isCollection(arg) {\n\treturn arg instanceof Collection;\n}\nfunction isCollectionClass(arg) {\n\treturn isClass(arg, Collection);\n}\n\nfunction isView(arg) {\n\treturn arg instanceof View$1;\n}\n\nfunction isViewClass(arg) {\n\treturn isClass(arg, View);\n}\n\nvar extend = Model.extend;\n\nvar BaseClass = function BaseClass() {};\nBaseClass.extend = extend;\n\n//export * from './marionette.js';\n\n//export * from './backbone.js';\n//export * from './helpers.js';\n//export { default as BaseClass } from './base-class.js';\n\n/*\nexport default {\n\tMnObject, \n\tRegion,\n\tModel,\n\tCollection,\n\tBackboneView,\n\tEvents,\n\tRouter,\n\thistory,\n\tajax,\t\n\tisClass,\n\tisModel,\n\tisModelClass,\n\tisCollection,\n\tisCollectionClass,\n\tisView,\n\tisViewClass,\n\textend,\n\tBaseClass\n}\n*/\n\nexport { MnObject, Region, Model, Collection, View$1 as BackboneView, Events, Router, history, ajax, isClass, isModel, isModelClass, isCollection, isCollectionClass, isView, isViewClass, extend, BaseClass };\n\n//# sourceMappingURL=index.js.map\n","import { Model, Collection, BackboneView, Router, MnObject, Region, BaseClass } from 'bbmn-core';\nimport Mn from 'backbone.marionette';\n\nconst ctors = _.reduce([\n\tModel, Collection, BackboneView, Router, MnObject, Region, BaseClass\n], (ctors, ctor) => {\n\tif(_.isFunction(ctor)){\n\t\tctors.push(ctor);\n\t}\n}, []);\n\n\nlet tryGetFromMn = ['Application', 'AppRouter'];\n\n_.each(tryGetFromMn, ClassName => {\n\t_.isFunction(Mn[ClassName]) && ctors.push(Mn[ClassName]);\n});\n\n\nexport default ctors;\n","import knownCtors from './ctors.js';\n\nfunction isKnownCtor(arg) {\n\tlet isFn = _.isFunction(arg);\n\tlet result = _(knownCtors).some((ctor) => arg === ctor || arg.prototype instanceof ctor);\n\treturn isFn && result;\n}\n\nexport default isKnownCtor;\n","import isKnownCtor from '../is-known-ctor/index.js';\nexport default function betterResult(obj, key, opts = {})\n{\n\tlet { context, args, checkAlso, force } = opts;\n\tlet defaultValue = opts.default;\n\n\tif(!_.isString(key) || key === '') return;\n\t\n\tlet value = (obj || {})[key];\n\n\tif (value != null && (!_.isFunction(value) || isKnownCtor(value)))\n\t\treturn value;\n\t\t\n\tlet result = force !== false && _.isFunction(value) ? value.apply(context || obj, args) : value;\n\n\tif (result == null && _.isObject(checkAlso)) {\n\t\tlet alsoOptions = _.omit(opts, 'checkAlso');\n\t\tresult = betterResult(checkAlso, key, alsoOptions);\n\t}\n\n\tif (result == null && defaultValue != null )\n\t\tresult = defaultValue;\n\n\treturn result;\n}\n","// camelCase('asd:qwe:zxc') -> asdQweZxc\n// camelCase('asd:qwe:zxc', true) -> AsdQweZxc\nexport default function camelCase(...args) {\n\t\n\tlet text;\n\tlet first;\n\n\tif (!args.length) return;\n\telse if (args.length == 1) {\n\t\ttext = args[0];\n\t} else {\n\t\tif(_.isBoolean(args[args.length - 1])){\n\t\t\tfirst = args.pop();\n\t\t}\n\t\ttext = _.filter(args, chunk => chunk != null).join(':');\n\t}\n\n\tif (!text) return text;\n\n\tif (!_.isString(text)) return text.toString();\n\ttext = text.replace(/:{2,}/gmi,':');\n\tvar splitter = first === true ? /(^|:)(\\w)/gi : /(:)(\\w)/gi;\n\ttext = text.replace(splitter, (match, prefix, text) => text.toUpperCase());\n\tif(!first)\n\t\ttext = text.replace(/(^)(\\w)/gi, (match, prefix, text) => text.toLowerCase());\n\treturn text;\n\n}\n","import { isModel } from 'bbmn-core';\nfunction getProperty(context, name)\n{\n\tif(context == null || !_.isObject(context) || name == null || name == '') return;\n\tif (isModel(context))\n\t\treturn context.get(name, { gettingByPath: true  });\n\telse\n\t\treturn context[name];\n}\nexport default getProperty;\t\n","\nimport getProperty from './get-property.js';\n\nfunction getByPathArray(context, propertyName, pathArray) {\n\t\n\tif (context == null || !_.isObject(context) || propertyName == null || propertyName == '')\n\t\treturn;\n\n\tvar prop = getProperty(context, propertyName);\n\n\tif (!pathArray.length || (pathArray.length && prop == null))\n\t\treturn prop;\n\n\tvar nextName = pathArray.shift();\n\n\treturn getByPathArray(prop, nextName, pathArray);\n\n}\n\nexport default getByPathArray;\n","import getByPathArray from './get-by-path-array.js';\n\nexport default function getByPath(obj, path) {\n\n\tif (obj == null || !_.isObject(obj) || path == null || path == '') return;\n\n\tvar pathArray = _.isString(path) ? path.split('.')\n\t\t: _.isArray(path) ? [].slice.call(path)\n\t\t\t: [path];\n\n\tvar prop = pathArray.shift();\n\n\treturn getByPathArray(obj, prop, pathArray);\n\n}\n","import result from '../better-result/index.js';\n\nexport default function getOption(context = {}, key, opts, also) {\n\n\tif(_.isObject(key) && _.isString(opts)){\n\t\tlet _opts = also;\n\t\talso = key;\n\t\tkey = opts;\n\t\topts = _opts;\n\t}\n\n\tlet options = _.extend({ args:[context], context }, opts, { default: null });\n\tlet { deep } = options;\n\tlet defaultValue = opts && opts.default;\n\n\tlet value = result(context.options || also, key, options);\n\tif (value == null && deep !== false) {\n\t\tvalue = result(context, key, options);\n\t}\n\t\n\treturn value != null ? value : defaultValue;\n\n}\n\nexport function instanceGetOption(...args){\n\treturn getOption(this, ...args);\n}\n","import getOption from '../get-option/index.js';\nimport { isView, isViewClass } from 'bbmn-core';\n\nexport default function buildViewByKey(key, { TextView, options } = {}) {\n\t\n\tif(!_.isString(key)) { return; }\n\n\tlet view = getOption(this, key, { args: [ this ] });\n\tlet _options = getOption(this, key + 'Options', { args: [ this ] });\n\n\tif (TextView && _.isString(view)) {\n\t\t_options = _.extend({}, _options, { text: view });\n\t\tview = TextView;\n\t}\n\toptions = _.extend({}, options, _options);\n\n\tif (isView(view)) {\n\t\treturn view;\n\t} else if (isViewClass(view)) {\n\t\treturn new view(options);\n\t}\t\n}\n","import { isView, isViewClass } from 'bbmn-core';\r\nimport { betterResult } from 'bbmn-utils';\r\n\r\nexport default Base => Base.extend({\r\n\t\r\n\trenderAllCustoms: false,\r\n\tshouldMergeCustoms: false,\r\n\trenderCollection: true,\r\n\r\n\tconstructor(){\r\n\t\tthis._customs = [];\t\t\r\n\t\tBase.apply(this, arguments);\r\n\t\tif (this.getOption('renderCollection') === false && this.collection) {\r\n\t\t\tthis._collection = this.collection;\r\n\t\t\tdelete this.collection;\r\n\t\t}\r\n\t\tthis._initializeCustoms();\r\n\t},\r\n\tgetCollection(){\r\n\t\treturn this.collection || this._collection;\r\n\t},\r\n\t_initializeCustoms(){\r\n\r\n\t\tlet optionsCustoms = betterResult(this.options, 'customs', { args: [this], context: this });\r\n\t\tlet instanceCustoms = betterResult(this, 'customs', { args: [this] });\r\n\t\tlet shouldMergeCustoms = this.getOption('shouldMergeCustoms');\r\n\t\tlet add;\r\n\t\tif (shouldMergeCustoms) {\r\n\t\t\tadd = (instanceCustoms || []).concat(optionsCustoms || []);\t\t\t\r\n\t\t} else {\r\n\t\t\tadd = instanceCustoms || optionsCustoms || [];\r\n\t\t}\r\n\t\tthis._customs.push(...add);\r\n\r\n\t\tif (this.getOption('renderAllCustoms')) {\r\n\t\t\tthis.on('render', this._renderCustoms);\r\n\t\t}\r\n\t},\r\n\trenderCustoms(){\r\n\t\tthis.triggerMethod('before:customs:render');\r\n\r\n\t\t_.each(this._renderedCustoms, view => view.destroy());\r\n\t\t\r\n\t\tlet customs = this.getCustoms();\r\n\t\t\r\n\t\tthis._renderedCustoms = this.addChildViews(customs);\r\n\r\n\t\tthis.triggerMethod('customs:render');\r\n\t},\r\n\t_renderCustoms(){\r\n\t\tif (!this.getOption('renderAllCustoms')) return;\r\n\t\tthis.renderCustoms();\r\n\t},\r\n\tgetCustoms() {\t\t\r\n\t\treturn this._prepareCustoms(this._customs.slice(0));\r\n\t},\r\n\t_prepareCustoms(rawcustoms){\r\n\t\treturn _.reduce(rawcustoms, (array, item) => {\r\n\t\t\tlet args = this._prepareCustom(item);\r\n\t\t\targs && (args = this.buildCustom(...args));\r\n\t\t\targs && array.push(args);\r\n\t\t\treturn array;\r\n\t\t},[]);\r\n\t},\r\n\t_prepareCustom(arg){\r\n\t\tif (_.isFunction(arg)) {\r\n\t\t\treturn this._prepareCustom(arg.call(this, this));\r\n\t\t} else if (_.isArray(arg)) {\r\n\t\t\treturn arg;\r\n\t\t} else {\r\n\t\t\treturn [arg, { index: 0 }];\r\n\t\t}\r\n\t},\r\n\tbuildCustom(view, options = {}){ \r\n\t\tif (isViewClass(view)) {\r\n\t\t\tlet childOptions = this.getOption('customViewOptions');\r\n\t\t\tview = new view(childOptions);\r\n\t\t} else if (_.isFunction(view)) {\r\n\t\t\tview = view.call(this, this);\r\n\t\t} else if(!isView(view) && _.isObject(view) && 'view' in view) {\r\n\t\t\tif(isView(view.view)) {\r\n\t\t\t\tif(_.isObject(view.options))\r\n\t\t\t\t\toptions = view.options;\r\n\t\t\t\tview = view.view;\r\n\t\t\t} else if(isViewClass(view.view)) {\r\n\t\t\t\tlet viewOptions = view.options;\r\n\t\t\t\tview = new view.view(viewOptions);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isView(view)) {\r\n\t\t\tthis._setupCustom(view);\r\n\t\t\treturn [view, options]; \r\n\t\t}\r\n\t},\r\n\t_setupCustom(view){\r\n\t\tthis.setupCustom(view);\r\n\t},\r\n\tsetupCustom: _.noop,\r\n\taddChildViews(children = []){\r\n\t\tif (!children.length) { return; }\r\n\r\n\t\tlet awaitingRender = false;\r\n\t\tlet rendered = [];\r\n\t\twhile(children.length) {\r\n\r\n\t\t\tlet args = children.pop();\r\n\t\t\tif (!args) { continue; }\r\n\r\n\t\t\tif (!_.isArray(args)) {\r\n\t\t\t\targs = [args, { index: 0 }];\r\n\t\t\t}\r\n\r\n\t\t\tlet [ view, index, options = {} ] = args;\r\n\t\t\tif (_.isObject(index)) {\r\n\t\t\t\toptions = index;\r\n\t\t\t\tindex = undefined;\r\n\t\t\t}\r\n\t\t\tif (index != null && !('index' in options)) {\r\n\t\t\t\toptions.index = index;\r\n\t\t\t}\r\n\t\t\toptions.preventRender = !!children.length;\r\n\t\t\tif (!isView(view)) { continue; }\r\n\r\n\t\t\tthis.addChildView(view, options);\r\n\t\t\trendered.push(view);\r\n\t\t\tawaitingRender = options.preventRender;\r\n\t\t}\r\n\t\tif (awaitingRender) {\r\n\t\t\tthis.sort();\r\n\t\t}\r\n\t\treturn rendered;\r\n\t},\r\n}, { CustomsMixin: true });\r\n","import { betterResult as result, getOption } from 'bbmn-utils';\r\n\r\nconst Mixin = Base => Base.extend({\r\n\r\n\t//property first approach\r\n\tgetProperty(key, opts){\r\n\t\t\r\n\t\tlet defaultGetArguments = result(this, '_getPropertyArguments', { args:[this], default:[this] });\r\n\t\tlet options = _.extend({\r\n\t\t\tdeep: Mixin.defaults.deep,\r\n\t\t\tforce: Mixin.defaults.force,\r\n\t\t\targs: defaultGetArguments\r\n\t\t}, opts, {\r\n\t\t\tcontext: this,\r\n\t\t});\r\n\t\tlet { deep } = options;\r\n\r\n\t\tlet value = result(this, key, options);\r\n\t\tif (value == null && deep !== false) {\r\n\t\t\tvalue = result(this.options, key, options);\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\r\n\t//options first approach\r\n\tgetOption(key, opts){\r\n\t\tlet defaultGetArguments = result(this, '_getOptionArguments', { args:[this], default:[this] });\r\n\t\tlet options = _.extend({\r\n\t\t\tdeep: Mixin.defaults.deep,\r\n\t\t\tforce: Mixin.defaults.force,\r\n\t\t\targs: defaultGetArguments\r\n\t\t}, opts);\r\n\r\n\t\treturn getOption(this, key, options);\r\n\t},\r\n\r\n\tmergeOptions(values = {}, keys = [], opts = {}){\r\n\t\t\r\n\t\tif(_.isString(keys))\r\n\t\t\tkeys = keys.split(/\\s*,\\s*/);\r\n\r\n\t\t_.each(keys, (key) => {\r\n\t\t\tconst option = result(values, key, _.extend({ force: false }, opts));\r\n\t\t\tif (option !== undefined) {\r\n\t\t\t\tthis[key] = option;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n}, {\r\n\tGetOptionMixin:true\r\n});\r\n\r\nMixin.defaults = {\r\n\tdeep: true,\r\n\tforce: true\r\n};\r\n\r\nexport default Mixin;\r\n","export default Collection => Collection.extend({\r\n\tconstructor(){\r\n\t\t\r\n\t\tthis.on({\r\n\t\t\trequest(){\r\n\t\t\t\tthis._isFetching = true;\r\n\t\t\t},\r\n\t\t\tsync(){\r\n\t\t\t\tthis._isFetching = false;\r\n\t\t\t\tthis._isFetched = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tCollection.apply(this, arguments);\r\n\t},\r\n\tisFetching(){\r\n\t\treturn this._isFetching === true;\r\n\t},\r\n\tisFetched(){\r\n\t\treturn this._isFetched === true;\r\n\t}\r\n});\r\n","\r\nimport { isKnownCtor } from 'bbmn-utils';\r\n\r\nexport default Base => Base.extend({\r\n\r\n\tconstructor(opts){\r\n\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._initializeChildrenable(opts);\r\n\r\n\t},\r\n\t_initializeChildrenable(opts){\r\n\t\tthis.mergeOptions(opts, ['parent', 'root']);\r\n\t\tif (this.parent == null && this.root == null) \r\n\t\t\tthis.root = this;\r\n\t},\r\n\r\n\t//call this method manualy for initialize children\r\n\tinitializeChildren(){\r\n\t\tif (this._childrenInitialized) return;\r\n\r\n\t\tlet children = this.getOption('children');\r\n\t\tthis._children = [];\r\n\t\t_(children).each(child => this._initializeChild(child));\r\n\r\n\t\tthis._childrenInitialized = true;\r\n\r\n\t},\r\n\r\n\t_initializeChild(arg){\r\n\t\tlet Child;\r\n\t\tlet options = {};\r\n\r\n\t\tif (isKnownCtor(arg))\r\n\t\t\tChild = arg;\r\n\t\telse if(_.isFunction(arg)){\r\n\t\t\t\r\n\t\t\tlet invoked = arg.call(this, this);\r\n\t\t\treturn this._initializeChild(invoked);\r\n\r\n\t\t} else if (_.isObject(arg)) {\r\n\t\t\tChild = arg.Child;\r\n\t\t\t_.extend(options, _.omit(arg, 'Child'));\r\n\t\t}\r\n\r\n\t\t//if (!isKnownCtor(arg)) return;\r\n\r\n\t\t_.extend(options, this.getOption('childOptions'), { parent: this });\r\n\t\toptions = this.buildChildOptions(options);\r\n\t\t\r\n\t\tlet child = this.buildChild(Child, options);\r\n\t\tthis._children.push(child);\r\n\r\n\t},\r\n\r\n\tbuildChildOptions(options){\r\n\t\treturn options;\r\n\t},\r\n\tbuildChild(Child, options){\r\n\t\t!Child && (Child = this.getOption('defaultChildClass') || this.prototype.constructor);\r\n\t\treturn new Child(options);\r\n\t},\r\n\t_getChildren(items, opts = {}){\r\n\t\tlet { exclude, filter, map } = opts;\r\n\r\n\t\tif(exclude != null && !_.isArray(exclude))\r\n\t\t\topts.exclude = [exclude];\r\n\r\n\t\tif(!_.isFunction(filter))\r\n\t\t\tdelete opts.filter;\r\n\r\n\t\tlet result = [];\r\n\t\t_(items).each((item, index) => {\r\n\r\n\t\t\tif(!this._childFilter(item, index, opts))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(_.isFunction(map))\r\n\t\t\t\titem = map(item);\r\n\r\n\t\t\titem && result.push(item);\r\n\t\t});\r\n\t\treturn result;\r\n\t},\r\n\t_childFilter(item, index, opts = {}){\r\n\t\t\r\n\t\tif(opts.force) return item;\r\n\r\n\t\tlet { exclude, filter } = opts;\r\n\r\n\t\tif(_.isFunction(this.childFilter) && !this.childFilter(item, index, opts))\r\n\t\t\treturn;\r\n\r\n\t\tif(_.isArray(exclude) && exclude.indexOf(item) >= 0)\r\n\t\t\treturn;\r\n\r\n\t\tif(_.isFunction(filter) && !filter.call(this, item, index, opts))\r\n\t\t\treturn;\r\n\r\n\t\treturn item;\r\n\t},\r\n\tchildFilter: false,\r\n\tgetChildren(opts = {}){\r\n\t\tlet children = [].slice.call(this._children || []);\r\n\t\topts.reverse && children.length > 1 && children.reverse();\t\t\r\n\t\treturn this._getChildren(children, opts);\r\n\t},\r\n\tgetAllChildren(opts = {}){\r\n\r\n\t\tlet { includeSelf, map, reverse } = opts;\r\n\t\tlet options = _.omit(opts, 'includeSelf', 'map');\r\n\r\n\r\n\t\tlet children = this.getChildren(options);\r\n\t\tlet result = _(children).chain()\r\n\t\t\t.map(child => {\r\n\t\t\t\tlet children = child.getAllChildren(options);\r\n\t\t\t\treturn reverse ? [children, child] : [child, children];\r\n\t\t\t})\r\n\t\t\t.flatten()\r\n\t\t\t.value();\r\n\r\n\t\tif (includeSelf) {\r\n\t\t\tlet method = reverse ? 'push' : 'unshift';\r\n\t\t\tresult[method](this);\r\n\t\t}\r\n\t\t\r\n\t\tif (_.isFunction(map)) {\r\n\t\t\treturn _(result).chain().map(map).filter(f => !!f).value();\r\n\t\t} else {\t\t\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetParent(){\r\n\t\treturn this.parent;\r\n\t}\r\n\r\n\r\n\r\n}, { ChildrenableMixin: true });\r\n","export default function getNestedResult(value, context, schema) {\r\n\treturn value != null \r\n\t\t&& _.isFunction(schema.nested) \r\n\t\t&& schema.nested(value, context);\r\n}","export default function getPropertySchema(model, key)\r\n{\r\n\tif (_.isFunction(model.getPropertySchema)) {\r\n\t\treturn model.getPropertySchema(key);\r\n\t} else {\r\n\t\treturn {};\r\n\t}\r\n}","export default function getDisplayConfig(key, model, schema){\r\n\tif (key == null) return {};\r\n\treturn (_.isFunction(model.getPropertyDisplayConfig) && model.getPropertyDisplayConfig(key))\r\n\t\t|| (schema && schema.display) || {};\r\n}","import { Model } from 'bbmn-core';\r\nimport { getByPath } from 'bbmn-utils';\r\n\r\nimport getNestedResult from './get-nested-result.js';\r\nimport getPropertySchema from './get-property-schema.js';\r\nimport getDisplayConfig from './get-display-config.js';\r\n\r\n\r\nexport default Base => {\r\n\tconst originalGet = Model.prototype.get;\r\n\tconst Mixed = Base.extend({\r\n\t\tgetByPath(key){\r\n\t\t\tif(key.indexOf('.') > -1)\r\n\t\t\t\treturn getByPath(this, key);\r\n\t\t\telse\r\n\t\t\t\treturn originalGet.call(this, key);\r\n\t\t},\r\n\t\tget(key, opts = {}){\r\n\t\t\tif(key == null || key == '') return;\t\r\n\t\t\t\r\n\t\t\tlet value = 'value' in opts \r\n\t\t\t\t? opts.value\r\n\t\t\t\t: this.getByPath.call(this, key);\r\n\r\n\t\t\tif (!_.size(opts)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\r\n\t\t\tlet prop = getPropertySchema(this, key);\r\n\t\t\tlet result = opts.nested && getNestedResult(value, this, prop);\r\n\t\t\tif (result != null) {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(opts.transform) && !opts.raw) {\r\n\t\t\t\tvalue = opts.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(_.isFunction(prop.transform) && !opts.raw){\r\n\t\t\t\tvalue = prop.transform.call(this, value, opts, this);\r\n\t\t\t}\r\n\r\n\t\t\tif(opts.display === true){\r\n\r\n\t\t\t\tlet display = getDisplayConfig(key, this, prop);\r\n\r\n\t\t\t\tif(opts.alternative){\r\n\t\t\t\t\tvalue = _.isFunction(display.alternative) && display.alternative.call(this, value, _.extend({},opts,prop), this);\r\n\t\t\t\t}\r\n\t\t\t\telse if(_.isFunction(display.transform)) {\r\n\t\t\t\t\tvalue = display.transform.call(this, value, opts, this);\r\n\t\t\t\t}\r\n\t\t\t\tif(display.ifEmpty && (value == null || value === ''))\r\n\t\t\t\t\treturn display.ifEmpty;\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\tdisplay(key, opts = {}){\r\n\t\t\t_.extend(opts, { display:true });\r\n\t\t\treturn this.get(key, opts);\r\n\t\t},\r\n\t\tpropertyName(key) {\r\n\t\t\tlet prop = getPropertySchema(this, key);\r\n\t\t\tlet display = getDisplayConfig(key, this, prop);\r\n\t\t\treturn display.label || key;\r\n\t\t}\r\n\t});\r\n\r\n\treturn Mixed;\r\n};\r\n","import { buildViewByKey } from 'bbmn-utils';\r\nexport default Base => Base.extend({\r\n\tbuildViewByKey(...args){\r\n\t\treturn buildViewByKey.call(this, ...args);\r\n\t},\r\n});\r\n","import { betterResult } from 'bbmn-utils';\r\n\r\nconst defaultCssConfig = {\r\n\tbeforeRender: true,\r\n\tmodelChange: true,\r\n\trefresh: true,\r\n};\r\n\r\nexport default (Base) => Base.extend({\r\n\tconstructor(){\r\n\t\tif(!this.cssClassModifiers) {\r\n\t\t\tthis.cssClassModifiers = [];\r\n\t\t}\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis._setupCssClassModifiers();\t\t\r\n\t},\r\n\taddCssClassModifier(...modifiers){\r\n\t\tthis.cssClassModifiers.push(...modifiers);\r\n\t},\r\n\trefreshCssClass(){\r\n\t\tlet className = this._getCssClassString();\r\n\t\tif(className == ''){\r\n\t\t\tthis.$el.removeAttr('class');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.$el.attr({\r\n\t\t\t\tclass: className\r\n\t\t\t});\r\n\t\t}\r\n\t},\t\r\n\r\n\t_getCssClassModifiers(){\r\n\t\tlet optsModifiers = betterResult(this.options || {}, 'cssClassModifiers', { args:[this.model, this], default: [] });\r\n\t\tlet propsModifiers = betterResult(this, 'cssClassModifiers', { args:[this.model, this], default: [] });\r\n\t\tlet className = betterResult(this, 'className', { args:[this.model, this], default: [] });\r\n\t\tlet modifiers = [className].concat(optsModifiers, propsModifiers);\r\n\t\treturn modifiers;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassModifiers(){\r\n\t\treturn this._getCssClassModifiers();\r\n\t},\r\n\t_getCssClassString()\r\n\t{\r\n\t\tlet modifiers = this.getCssClassModifiers();\r\n\t\t\r\n\t\tlet classes = _(modifiers).reduce((hash, modifier) => {\r\n\t\t\tif(modifier == null || modifier === '') { return hash; }\r\n\t\t\tlet cls;\r\n\t\t\tif (_.isString(modifier)) {\r\n\t\t\t\tcls = modifier;\r\n\t\t\t} else if (_.isFunction(modifier)) {\r\n\t\t\t\tlet builded = modifier.call(this, this.model, this);\r\n\t\t\t\tcls = _.isString(builded) && builded || undefined;\r\n\t\t\t}\r\n\t\t\tcls && (hash[cls] = true);\r\n\t\t\treturn hash;\r\n\t\t}, {});\r\n\r\n\t\treturn _.keys(classes).join(' ');\r\n\r\n\t\t// return _.chain(classes)\r\n\t\t// \t.keys(classes)\r\n\t\t// \t.uniq()\r\n\t\t// \t.value()\r\n\t\t// \t.join(' ');\r\n\r\n\t},\r\n\r\n\t_setupCssClassModifiers(){\r\n\r\n\t\tif(this._cssClassModifiersInitialized) return;\r\n\r\n\t\tlet cfg = this.getCssClassConfig();\r\n\t\tif(!cfg) return;\r\n\r\n\t\tlet events = this.getCssClassEvents(cfg);\r\n\t\t_(events).each((eventName) => this.on(eventName, this.refreshCssClass));\r\n\r\n\t\tif (cfg.modelChange && this.model) {\r\n\t\t\tthis.listenTo(this.model, 'change', this.refreshCssClass);\r\n\t\t}\r\n\r\n\t\tthis._cssClassModifiersInitialized = true;\r\n\t},\r\n\t\r\n\t_getCssClassConfig(){\r\n\t\tlet cfg = _.extend({}, defaultCssConfig, this.getOption('cssClassConfig'));\r\n\t\tif(!cfg || _.size(cfg) == 0) return;\r\n\t\treturn cfg;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassConfig(){\r\n\t\treturn this._getCssClassConfig();\r\n\t},\r\n\r\n\t_getCssClassEvents(cfg){\r\n\t\tlet events = [].concat(cfg.events || []);\r\n\t\tif(cfg.refresh) events.push('refresh');\r\n\t\tif(cfg.beforeRender) events.push('before:render');\r\n\t\tevents = _(events).uniq();\r\n\t\treturn events;\r\n\t},\r\n\t//override this if you need other logic\r\n\tgetCssClassEvents(cfg){\r\n\t\treturn this._getCssClassEvents(cfg);\r\n\t}\r\n}, { CssClassModifiersMixin: true });\r\n","export default Base => Base.extend({\r\n\tdestroy(){\r\n\t\tif(this._isDestroyed || this._isDestroying) { return; }\r\n\t\tthis._isDestroying = true;\r\n\t\tBase.prototype.destroy.apply(this, arguments);\r\n\t\tdelete this._isDestroying;\r\n\t},\r\n\tisDestroyed(){\r\n\t\treturn this._isDestroyed || this._isDestroying;\r\n\t}\r\n}, { DestroyMixin: true });\r\n","\r\nconst defaultSelector = (name, prefix = '') => prefix + 'region-' + name;\r\n\r\nfunction defaultUpdateDom(name, $el)\r\n{\r\n\tlet selector = defaultSelector(name);\r\n\tlet element = $('<div>').addClass(selector);\r\n\t$el.append(element);\r\n\r\n\treturn '.' + selector;\r\n}\r\n\r\nexport default function buildRegionFunc(view, hash, context){\r\n\r\n\tlet { $el } = view;\t\r\n\tlet { autoCreateRegion } = context;\r\n\tlet { updateDom, name, el } = hash;\r\n\tlet regionEl;\r\n\t\r\n\tlet region = view.getRegion(name);\r\n\r\n\r\n\tif (el == null && autoCreateRegion !== false) {\r\n\r\n\t\tlet testEl = region && region.getOption('el',{ deep:false});\r\n\r\n\t\tif (!region || !testEl || !$el.find(testEl).length) {\r\n\r\n\t\t\tregionEl = defaultUpdateDom(name, $el);\r\n\r\n\t\t} \r\n\r\n\t} else if(_.isFunction(updateDom)) {\r\n\t\tupdateDom.call(view, $el, view);\r\n\r\n\t} \r\n\t\r\n\t\r\n\tif (!region) {\r\n\t\tlet definition = _.pick(hash, 'replaceElement', 'regionClass');\r\n\t\tdefinition.el = hash.el || regionEl;\r\n\t\tregion = view.addRegion(name, definition);\r\n\t}\r\n\r\n\r\n\treturn region;\r\n}\r\n","import buildRegion from './build-region.js';\r\n\r\nexport default function normalizeNestedViewContextRegion(context) {\r\n\r\n\tlet { region } = context;\r\n\tlet regionName = (_.isString(region) && region) || context.regionName || context.name;\r\n\r\n\tif (_.isString(region) || region == null) {\r\n\t\tregion = {};\r\n\t} else if (_.isFunction(region)) {\r\n\t\tregion = region.call(this, context, this);\r\n\t}\r\n\r\n\tif (_.isObject(region)) {\r\n\r\n\t\tif(!region.name)\r\n\t\t\tregion.name = regionName;\r\n\t\tlet replaceElement = this.getOption('replaceNestedElement');\r\n\t\tcontext.region = _.extend({ replaceElement }, region);\r\n\t\tcontext.show = _.partial(buildRegion, this, context.region, context);\r\n\t}\r\n\treturn context;\r\n}\r\n","\r\nimport { betterResult as result } from 'bbmn-utils';\r\nimport { isView, isViewClass } from 'bbmn-core';\r\nimport normalizeRegion from './normalize-region.js';\r\nexport default Base => Base.extend({\r\n\tconstructor(){\r\n\t\tthis._nestedViews = {};\r\n\t\tBase.apply(this, arguments);\r\n\t\tthis.initializeNestedViews();\r\n\t},\r\n\ttemplate: false,\r\n\r\n\tshowAllNestedViewsOnRender: false,\r\n\tshowNestedViewOnAdd: false,\r\n\treplaceNestedElement: true,\r\n\r\n\tinitializeNestedViews(){\r\n\t\tif (this._nestedViewsInitialized) return;\r\n\r\n\t\tif(this.getOption('showAllNestedViewsOnRender')) {\r\n\t\t\tthis.on('render', () => this.showAllNestedViews());\r\n\t\t}\r\n\r\n\t\tlet nesteds = this.getOption('nestedViews', { args:[this.model, this]});\r\n\t\t_(nesteds).each((context, index) => {\r\n\r\n\t\t\tlet name = _.isString(index) ? index : (context.name || _.uniqueId('nested'));\r\n\t\t\tthis.addNestedView(name, context);\r\n\r\n\t\t});\r\n\r\n\t\tthis._nestedViewsInitialized = true;\r\n\t},\r\n\t_normalizeNestedContext(name, context){\r\n\r\n\t\tif (isViewClass(context)) {\r\n\t\t\tlet View = context;\r\n\t\t\tcontext = {\r\n\t\t\t\tname, View\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t//unwrap to plain object\r\n\t\tif (_.isFunction(context)) {\r\n\t\t\tcontext = context.call(this, this.model, this);\r\n\t\t}\r\n\r\n\t\t//fix name if its not provided\r\n\t\tif (context.name == null) {\r\n\t\t\tcontext.name = name || _.uniqueId('nested');\r\n\t\t}\r\n\r\n\t\t//convert region to valid function\r\n\t\tcontext = normalizeRegion.call(this, context);\t\t\r\n\r\n\r\n\t\treturn context;\r\n\t},\r\n\t_createNestedContext(context){\r\n\t\tlet contexts = this.getNestedViewContext();\r\n\t\tcontexts[context.name] = context;\r\n\t},\r\n\r\n\taddNestedView(name, context){\r\n\r\n\t\tif (!_.isString(name) || name === '') {\r\n\t\t\tthrow new Error('addNestedView: first argument should be a string');\r\n\t\t}\r\n\r\n\t\tcontext = this._normalizeNestedContext(name, context);\r\n\t\tthis._createNestedContext(context);\r\n\t\tif(this.getOption('showNestedViewOnAdd') && this.isRendered()){\r\n\t\t\tthis.showNestedView(context);\r\n\t\t}\t\t\r\n\t},\r\n\r\n\tshowNestedView(name){\r\n\t\tlet region = this.getNestedViewRegion(name);\r\n\t\tlet view = region && this.buildNestedView(name);\r\n\t\tif (view) {\r\n\t\t\tregion.show(view);\r\n\t\t}\r\n\t},\r\n\tshowAllNestedViews(){\r\n\t\tlet contexts = this.getNestedViewContext();\r\n\t\t_(contexts).each(context => this.showNestedView(context));\r\n\t},\r\n\tgetNestedViewContext(name){\r\n\t\tlet contexts = this._nestedViews;\r\n\t\tif (arguments.length == 0)\r\n\t\t\treturn contexts;\r\n\t\telse\r\n\t\t\treturn contexts[name];\r\n\t},\r\n\r\n\r\n\tbuildNestedView(name){\r\n\r\n\t\tlet context = _.isObject(name) ? name\r\n\t\t\t: _.isString(name) ? this.getNestedViewContext(name)\r\n\t\t\t\t: null;\r\n\r\n\t\tif(!context) return;\r\n\t\tlet passedView = result(context, 'view', { context: this, args: [this, this.model] });\r\n\t\tif(_.isFunction(context.template))\r\n\t\t\treturn context.template;\r\n\t\telse if ( isView(passedView) ) {\r\n\t\t\treturn passedView;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet View = context.View;\r\n\t\t\tlet options = this.buildNestedViewOptions(result(context, 'options', { context: this, args: [this, this.model], default:{} }));\r\n\t\t\t\r\n\t\t\treturn new View(options);\r\n\t\t}\r\n\t},\r\n\tbuildNestedViewOptions(opts){\r\n\t\treturn opts;\r\n\t},\r\n\tgetNestedViewRegion(name){\r\n\t\tlet context = _.isObject(name) ? name\r\n\t\t\t: _.isString(name) ? this.getNestedViewContext(name)\r\n\t\t\t\t: null;\r\n\t\treturn context && _.result(context, 'show');\r\n\t}\r\n\t\r\n});\r\n"],"names":["CollectionView","extend","apply","arguments","getOption","emptyView","_handleEmptyFetch","collection","length","listenToOnce","_renderChildren","rebuildIndexes","models","index","model","view","_children","findByModel","_index","on","bind","_isModelView","prototype","_addChild","v1","v2","res","_hasUnrenderedViews","_addedViews","views","children","_views","triggerMethod","_showEmptyView","els","_getBuffer","_attachChildren","options","_isDestroyed","_","isObject","_isRendered","preventRender","render","hasIndex","isAddedToEnd","sort","_destroyEmptyView","isEmpty","EmptyView","_getEmptyView","_getEmptyViewOptions","_emptyViewInstance","addChildView","_removeChildView","_removeChild","destroy","CollectionViewMixin_4x","MnObject","Mn","Object","isClass","arg","Base","isFunction","isModel","Model","isView","View$1","isViewClass","View","BaseClass","ctors","reduce","Collection","BackboneView","Router","Region","ctor","push","tryGetFromMn","each","ClassName","isKnownCtor","isFn","result","knownCtors","some","betterResult","obj","key","opts","context","args","checkAlso","force","defaultValue","default","isString","value","alsoOptions","omit","getProperty","name","get","gettingByPath","getByPathArray","propertyName","pathArray","prop","nextName","shift","getByPath","path","split","isArray","slice","call","also","_opts","deep","buildViewByKey","TextView","_options","text","_customs","_collection","_initializeCustoms","optionsCustoms","instanceCustoms","shouldMergeCustoms","add","concat","_renderCustoms","_renderedCustoms","customs","getCustoms","addChildViews","renderCustoms","_prepareCustoms","rawcustoms","array","item","_prepareCustom","buildCustom","childOptions","viewOptions","_setupCustom","setupCustom","noop","awaitingRender","rendered","pop","undefined","CustomsMixin","Mixin","defaultGetArguments","defaults","values","keys","option","_isFetching","_isFetched","_initializeChildrenable","mergeOptions","parent","root","_childrenInitialized","_initializeChild","child","Child","invoked","buildChildOptions","buildChild","constructor","items","exclude","filter","map","_childFilter","childFilter","indexOf","reverse","_getChildren","includeSelf","getChildren","chain","getAllChildren","flatten","method","f","ChildrenableMixin","getNestedResult","schema","nested","getPropertySchema","getDisplayConfig","getPropertyDisplayConfig","display","originalGet","Mixed","size","transform","raw","alternative","ifEmpty","label","defaultCssConfig","cssClassModifiers","_setupCssClassModifiers","className","_getCssClassString","$el","removeAttr","attr","optsModifiers","propsModifiers","modifiers","_getCssClassModifiers","getCssClassModifiers","classes","hash","modifier","cls","builded","join","_cssClassModifiersInitialized","cfg","getCssClassConfig","events","getCssClassEvents","eventName","refreshCssClass","modelChange","listenTo","_getCssClassConfig","refresh","beforeRender","uniq","_getCssClassEvents","CssClassModifiersMixin","_isDestroying","DestroyMixin","defaultSelector","prefix","defaultUpdateDom","selector","element","$","addClass","append","buildRegionFunc","autoCreateRegion","updateDom","el","regionEl","region","getRegion","testEl","find","definition","pick","addRegion","normalizeNestedViewContextRegion","regionName","replaceElement","show","partial","buildRegion","_nestedViews","initializeNestedViews","_nestedViewsInitialized","showAllNestedViews","nesteds","uniqueId","addNestedView","normalizeRegion","contexts","getNestedViewContext","Error","_normalizeNestedContext","_createNestedContext","isRendered","showNestedView","getNestedViewRegion","buildNestedView","passedView","template","buildNestedViewOptions"],"mappings":"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"}